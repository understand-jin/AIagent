# AI 에이전트 과제 기획서

---

## 1. 과제 개요

- **과제명:** 대웅그룹 맞춤형 AI 시장 분석 & 전략 보고서 자동 생성 시스템
- **핵심 컨셉:** '검색'이 아닌 '분석 파이프라인'으로서의 시장 인텔리전스 — 단순 뉴스 키워드 검색을 넘어, 수집→전문가 분석→전략 도출의 3단계 AI 에이전트 체인으로 기업 맞춤 전략 보고서를 자동 생성
- **타겟 페르소나:** 시장 변화에 빠르게 대응해야 하는 대웅그룹 전략기획팀 담당자, 특정 산업 이슈(신약, GLP-1 등)에 대한 대웅의 포지셔닝과 대응 방향을 신속하게 파악해야 하는 의사결정자

---

## 2. 에이전트 아키텍처 설계

### 아키텍처 다이어그램

```
[사용자 입력: 키워드]
        │
        ▼
┌─────────────────────────────┐
│  노드 1: 수집가 (Researcher) │
│  - Tavily API 뉴스 검색     │
│  - 키워드 검색 + "대웅 키워드" 검색 동시 수행 │
│  - 중복/저신뢰 필터링        │
│  - 제목순 정렬 (최대 20건)   │
└────────────┬────────────────┘
             │ DataFrame (기사 목록)
             ▼
┌─────────────────────────────┐
│  노드 2: 대웅 전문가 (Expert) │
│  - 대웅 관련 기사 필터링     │
│  - Groq LLM 호출            │
│  - 대웅 현황·포지션 요약 생성 │
└────────────┬────────────────┘
             │ Expert Report (텍스트)
             ▼
┌─────────────────────────────┐
│  노드 3: 전략가 (Strategist) │
│  - 수집가 결과 + 전문가 리포트 통합 │
│  - Groq LLM 호출            │
│  - 단기(3개월) / 중기(1년) 전략 보고서 생성 │
└────────────┬────────────────┘
             │
             ▼
     [Flask 웹 UI 시각화 출력]
```

### 설계 의도

> 일반 단일 LLM 호출의 경우 시장 트렌드와 특정 기업(대웅그룹)의 상황을 동시에 정확히 반영하기 어렵다.
> 이를 해결하기 위해 **수집 → 기업 전문가 분석 → 전략 도출** 의 역할 분리 구조를 설계하였다.
> 노드 2(대웅 전문가)가 시장 데이터에서 대웅 관련 정보만 선별·요약한 뒤 노드 3에 주입함으로써,
> 전략가 노드가 '시장 일반론'이 아닌 **대웅의 실제 상황에 맞는 전략**을 생성하도록 유도하였다.

### 노드 구성

| # | 노드명 | 역할 / 페르소나 |
|---|--------|----------------|
| 1 | **수집가 (Researcher)** | 냉철한 데이터 수집 전문가. Tavily 뉴스 API를 통해 사용자 키워드와 "대웅 {키워드}" 두 가지 쿼리로 뉴스를 수집하고, 중복·블로그·SNS 등 저신뢰 출처를 1차 필터링한 뒤 최대 20건을 구조화된 DataFrame으로 정제한다. |
| 2 | **대웅 전문가 (Expert)** | 대웅그룹 전문 산업 애널리스트. 수집된 기사 중 대웅 관련 내용을 선별하여 핵심 사업 현황, 최근 동향, 경쟁사 대비 강약점, 리스크를 500~700자로 요약한다. |
| 3 | **전략가 (Strategist)** | 전략 컨설턴트. 수집가의 시장 트렌드 데이터와 전문가의 대웅 현황 분석을 종합하여 단기(0~3개월) 즉시 실행 액션 3개와 중기(3~12개월) 경쟁력 강화 방향 3개를 포함한 1페이지 전략 보고서를 생성한다. |

### 데이터 흐름

```
키워드 입력
  → [수집가] 뉴스 크롤링 + 필터링 + 정렬 → DataFrame
  → [대웅 전문가] 대웅 기사 추출 + LLM 요약 → Expert Report
  → [전략가] DataFrame + Expert Report 통합 + LLM 전략 생성 → 단기/중기 전략 보고서
  → Flask 렌더링 → 웹 UI 시각화
```

---

## 3. 개선 기록

### 초기 시스템의 실패 사례

초기 설계에서는 단일 `generate_groq_report()` 함수가 키워드 하나로 시장 동향 보고서를 생성하는 **단일 노드** 구조였다.
이 방식의 문제점:
- 대웅그룹과 관련 없는 경쟁사 동향이 보고서의 절반을 차지하는 현상 발생
- "대웅은 어떻게 대응해야 하는가?"라는 질문의 핵심이 보고서에 반영되지 않음
- 뉴스 수집 시 사용자 키워드만 검색하여 대웅 관련 기사가 거의 포함되지 않음

### 아키텍처적 조치

| 문제 | 조치 |
|------|------|
| 대웅 관련 기사 부족 | `node_researcher()`에서 `"대웅 {키워드}"` 쿼리를 추가 실행, 두 결과를 병합 |
| 일반 시장 보고서만 생성 | 노드 2(대웅 전문가)를 독립 분리하여 대웅 현황만 집중 분석하는 전용 프롬프트 설계 |
| 전략 부재 | 노드 3(전략가)에 Expert Report를 주입 컨텍스트로 제공하여 대웅 맞춤 전략 도출 유도 |
| 저신뢰 출처 혼입 | `_domain_filter()`로 블로그·SNS 도메인 필터링, 제목 앞 20자 기준 중복 제거 |

### 시스템 진화의 결과

최종적으로 사용자가 키워드(예: `GLP-1`)를 입력하면:
1. 수집가가 일반 뉴스 + 대웅 관련 뉴스를 통합 수집
2. 대웅 전문가가 대웅의 현재 포지션과 리스크를 명확히 요약
3. 전략가가 "대웅이 GLP-1 트렌드에서 단기·중기적으로 취해야 할 구체적 액션"을 도출하는 구조가 완성됨

---

## 4. 최종 결과물

### 시스템 구성 파일

| 파일 | 역할 |
|------|------|
| `app.py` | Flask 메인 앱. 3개 노드 함수(`node_researcher`, `node_expert`, `node_strategist`) 및 라우팅 |
| `link.py` | Tavily API 뉴스 검색 모듈 |
| `check.py` | 뉴스 URL 크롤링 모듈 (BeautifulSoup) |
| `templates/index.html` | 3-노드 파이프라인 시각화 웹 UI |

### 출력 결과 구성 (웹 UI)

```
┌─────────────────────────────────────────────────────┐
│  📡 수집가    →    🧠 대웅 전문가    →    📋 전략가    │  ← 파이프라인 시각화
└─────────────────────────────────────────────────────┘

[노드1 카드]            [노드2 카드]            [노드3 카드]
수집 기사 목록          대웅그룹 현황 분석       단기/중기 전략 요약
(기사 제목+요약)        (현황·포지션·리스크)     (액션 아이템 3개씩)
빈출 키워드 클라우드

─────────────────────────────────────────────────────
            [전략 보고서 전문]
     Executive Summary / 핵심 트렌드 / 단기 전략
     중기 전략 / 리스크 & 대응방안 / 결론 및 우선순위
     + 참고 링크
```

### 핵심 프롬프트 설계 (노드별)

**노드 2 — 대웅 전문가 프롬프트 구조:**
```
1. 대웅그룹 핵심 사업 현황 (2~3줄)
2. '{키워드}' 관련 대웅의 최근 동향 (3~5줄)
3. 경쟁사 대비 대웅의 강점/약점 (2~3줄)
4. 주목할 리스크 요인 (2줄)
```

**노드 3 — 전략가 프롬프트 구조:**
```
## Executive Summary (3줄)
## 시장 핵심 트렌드 TOP3
## 단기 전략 (0~3개월) — 즉시 실행 가능한 액션 아이템 3개
## 중기 전략 (3~12개월) — 중장기 경쟁력 강화 방향 3개
## 예상 리스크 & 대응 방안
## 결론 및 우선순위
```

### 사용 기술 스택

- **Backend:** Python, Flask
- **LLM:** Groq API (`llama-3.3-70b-versatile`)
- **뉴스 검색:** Tavily API
- **크롤링:** requests + BeautifulSoup4
- **Frontend:** HTML/CSS (Vanilla, 반응형)
